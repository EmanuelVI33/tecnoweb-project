import{r as a}from"./app-D9kGQBXh.js";function g(t,e){window.dispatchEvent(new StorageEvent("storage",{key:t,newValue:e}))}const c=(t,e)=>{const r=JSON.stringify(e);window.localStorage.setItem(t,r),g(t,r)},i=t=>{window.localStorage.removeItem(t),g(t,null)},S=t=>window.localStorage.getItem(t),u=t=>(window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)),w=()=>{throw Error("useLocalStorage is a client-only hook")};function f(t,e){const r=()=>S(t),n=a.useSyncExternalStore(u,r,w),l=a.useCallback(s=>{try{const o=typeof s=="function"?s(JSON.parse(n)):s;o==null?i(t):c(t,o)}catch(o){console.warn(o)}},[t,n]);return a.useEffect(()=>{S(t)===null&&typeof e<"u"&&c(t,e)},[t,e]),[n?JSON.parse(n):e,l]}export{f as u};
