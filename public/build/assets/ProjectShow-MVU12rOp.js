var ce=Object.defineProperty;var de=(t,s,r)=>s in t?ce(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var w=(t,s,r)=>de(t,typeof s!="symbol"?s+"":s,r);import{j as e,r as n,q as N,W as E,a as me,y as pe}from"./app-mIvgi7q9.js";import{N as ue,T as ge}from"./sonner-NKqcBLuv.js";import{D as h,R as j}from"./ResponsiveNavLink-BvrAKkzy.js";import{b as xe}from"./icon-SE_dXAv0.js";import{u as fe,b as T,c as he}from"./index-MOI7GUpq.js";import{P as ve}from"./index-lWbRec8w.js";import{c as je,u as C,a as Ne,b as P,B as ye}from"./button-BhpuKSDX.js";import{c as m}from"./shadcn-C-5SdYIA.js";import{u as S}from"./selected-project-CdBfUX0R.js";import{T as be,a as we,b as D,c as A}from"./tabs-BcfksyLN.js";import{a as v}from"./element.model-r3-WMhpT.js";import{E as De,T as Ae}from"./TabPresenter-gJZSY1CI.js";import{E as Ee,T as Te}from"./TabVideo-B7Dnf-ga.js";import{J as Ce}from"./index-CKklIE-u.js";import Pe from"./Timeline-DRoIra_p.js";import{e as R,f as Se,O as Re,W as _e,C as ke,T as Me,D as Oe,a as _,P as $e,R as Le}from"./index-BNzkJJ_8.js";import Ie from"./Player-B3IT1A7Z.js";import"./transition-D1nVVH86.js";import"./index-CCEhCbIn.js";import"./index-0OVkvYRM.js";import"./form-yCao3SMx.js";import"./input-R55A_0He.js";import"./radio-group--8rXvaH7.js";import"./element-presenter.model-DAjEEdYv.js";import"./card-MS-GRVv3.js";function Ve(t){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2rem",height:"2rem",viewBox:"0 0 24 24",...t,children:e.jsx("path",{fill:"currentColor",d:"M21 7v12q0 .825-.587 1.413T19 21H5q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h12zm-9 11q1.25 0 2.125-.875T15 15t-.875-2.125T12 12t-2.125.875T9 15t.875 2.125T12 18m-6-8h9V6H6z"})})}const k=n.createContext({open:!1,toggleModal:()=>{}}),ze=({children:t})=>{const[s,r]=n.useState(!1),a=()=>{r(o=>!o)};return e.jsx(k.Provider,{value:{open:s,toggleModal:a},children:t})},Ge=t=>s=>e.jsx(ze,{children:e.jsx(t,{...s})}),b=()=>n.useContext(k),qe=Ge;var Be="Toggle",M=n.forwardRef((t,s)=>{const{pressed:r,defaultPressed:a=!1,onPressedChange:o,...i}=t,[l=!1,u]=fe({prop:r,onChange:o,defaultProp:a});return e.jsx(ve.button,{type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":t.disabled?"":void 0,...i,ref:s,onClick:T(t.onClick,()=>{t.disabled||u(!l)})})});M.displayName=Be;var O=M;const We=je("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),$=n.forwardRef(({className:t,variant:s,size:r,...a},o)=>e.jsx(O,{ref:o,className:m(We({variant:s,size:r,className:t})),...a}));$.displayName=O.displayName;function Fe(){b(),N().props;const{isSave:t,togleSave:s,elements:r}=S(),{props:{project:a}}=N(),{data:o,post:i,wasSuccessful:l,errors:u}=E({elements:[],project_id:a.id.toString()}),g=()=>{t||r.length<1||(o.elements=r,i("/elements"))};return e.jsx($,{pressed:!t,onPressedChange:g,children:e.jsx(Ve,{})})}function He(){const[t,s]=n.useState(!1),{props:r}=N(),{auth:{user:a}}=r,o=r.project;return e.jsxs("nav",{className:"bg-white dark:bg-gray-800 border-b border-gray-100",children:[e.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between ali h-16",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"shrink-0 flex items-center",children:e.jsx(me,{href:"/",children:e.jsx("img",{className:"h-14",src:"/Logo.jpg",alt:""})})}),e.jsx("div",{className:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex",children:e.jsx(ue,{href:route("projects.index"),active:route().current("projects"),children:"Proyectos"})})]}),o&&e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 justify-center items-center text-xs md:text-sm text-center truncate ",children:[e.jsx("p",{className:"font-medium",children:o.name}),e.jsx("p",{children:o.presenter.full_name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"hidden sm:flex sm:items-center sm:ms-6",children:e.jsx("div",{className:"ms-3 relative",children:e.jsxs(h,{children:[e.jsx(h.Trigger,{children:e.jsxs("div",{className:" text-slate-600 dark:bg-transparent dark:bg-slate-800 dark:text-white flex gap-2 justify-center items-center",children:[e.jsxs("span",{className:"flex gap-1",children:[a.pointer,e.jsx(xe,{})]}),e.jsx("span",{className:"inline-flex rounded-md",children:e.jsxs("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-gray-500 bg-white dark:bg-gray-700 dark:text-white hover:text-gray-700 focus:outline-none transition ease-in-out duration-150",children:[a.name,e.jsx("svg",{className:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}),e.jsxs(h.Content,{children:[e.jsx(h.Link,{href:route("profile.edit"),children:"Profile"}),e.jsx(h.Link,{href:route("logout"),method:"post",as:"button",children:"Log Out"})]})]})})}),e.jsx(Fe,{})]}),e.jsx("div",{className:"-me-2 flex items-center sm:hidden",children:e.jsx("button",{onClick:()=>s(i=>!i),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out",children:e.jsxs("svg",{className:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("path",{className:t?"hidden":"inline-flex",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"}),e.jsx("path",{className:t?"inline-flex":"hidden",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})]})})})]})}),e.jsxs("div",{className:(t?"block":"hidden")+" sm:hidden",children:[e.jsx("div",{className:"pt-2 pb-3 space-y-1",children:e.jsx(j,{href:route("projects.index"),active:route().current("projects"),children:"Dashboard"})}),e.jsxs("div",{className:"pt-4 pb-1 border-t border-gray-200",children:[e.jsxs("div",{className:"px-4",children:[e.jsx("div",{className:"font-medium text-base text-gray-800",children:a==null?void 0:a.name}),e.jsx("div",{className:"font-medium text-sm text-gray-500",children:a==null?void 0:a.email})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx(j,{href:route("profile.edit"),children:"Profile"}),e.jsx(j,{method:"post",href:route("logout"),as:"button",children:"Log Out"})]})]})]})]})}function Je({children:t}){return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(He,{}),e.jsx(ge,{}),e.jsx("main",{className:"",children:t})]})}class y{static createElement(s){const{id:r,title:a,type:o,element:i,video_url:l}=s,u=(i==null?void 0:i.video_id)??"";console.log(`type Element ${o}`);const g=this.creators[o];if(!g)throw new Error(`Unknown element type: ${o}`);let c={id:r.toString(),title:a,videoUrl:l,type:o,videoId:u};if(o===v.PRESENTER&&i){const{content:d,expression:f}=i;c={...c,content:d,expression:f}}else o===v.VIDEO&&(c={...c});return g.createElement(c)}}w(y,"creators",{[v.PRESENTER]:new De,[v.VIDEO]:new Ee});class Ue{static fromElementResponseToEntity(s){return s.map(y.createElement.bind(y))}}var L="AlertDialog",[Ye,$t]=he(L,[R]),p=R(),I=t=>{const{__scopeAlertDialog:s,...r}=t,a=p(s);return e.jsx(Le,{...a,...r,modal:!0})};I.displayName=L;var Ke="AlertDialogTrigger",Qe=n.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...a}=t,o=p(r);return e.jsx(Se,{...o,...a,ref:s})});Qe.displayName=Ke;var Xe="AlertDialogPortal",V=t=>{const{__scopeAlertDialog:s,...r}=t,a=p(s);return e.jsx($e,{...a,...r})};V.displayName=Xe;var Ze="AlertDialogOverlay",z=n.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...a}=t,o=p(r);return e.jsx(Re,{...o,...a,ref:s})});z.displayName=Ze;var x="AlertDialogContent",[et,tt]=Ye(x),G=n.forwardRef((t,s)=>{const{__scopeAlertDialog:r,children:a,...o}=t,i=p(r),l=n.useRef(null),u=C(s,l),g=n.useRef(null);return e.jsx(_e,{contentName:x,titleName:q,docsSlug:"alert-dialog",children:e.jsx(et,{scope:r,cancelRef:g,children:e.jsxs(ke,{role:"alertdialog",...i,...o,ref:u,onOpenAutoFocus:T(o.onOpenAutoFocus,c=>{var d;c.preventDefault(),(d=g.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[e.jsx(Ne,{children:a}),e.jsx(rt,{contentRef:l})]})})})});G.displayName=x;var q="AlertDialogTitle",B=n.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...a}=t,o=p(r);return e.jsx(Me,{...o,...a,ref:s})});B.displayName=q;var W="AlertDialogDescription",F=n.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...a}=t,o=p(r);return e.jsx(Oe,{...o,...a,ref:s})});F.displayName=W;var st="AlertDialogAction",H=n.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...a}=t,o=p(r);return e.jsx(_,{...o,...a,ref:s})});H.displayName=st;var J="AlertDialogCancel",U=n.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...a}=t,{cancelRef:o}=tt(J,r),i=p(r),l=C(s,o);return e.jsx(_,{...i,...a,ref:l})});U.displayName=J;var rt=({contentRef:t})=>{const s=`\`${x}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${x}\` by passing a \`${W}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${x}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return n.useEffect(()=>{var a;document.getElementById((a=t.current)==null?void 0:a.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},at=I,ot=V,Y=z,K=G,Q=H,X=U,Z=B,ee=F;const nt=at,it=ot,te=n.forwardRef(({className:t,...s},r)=>e.jsx(Y,{className:m("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));te.displayName=Y.displayName;const se=n.forwardRef(({className:t,...s},r)=>e.jsxs(it,{children:[e.jsx(te,{}),e.jsx(K,{ref:r,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));se.displayName=K.displayName;const re=({className:t,...s})=>e.jsx("div",{className:m("flex flex-col space-y-2 text-center sm:text-left",t),...s});re.displayName="AlertDialogHeader";const ae=({className:t,...s})=>e.jsx("div",{className:m("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});ae.displayName="AlertDialogFooter";const oe=n.forwardRef(({className:t,...s},r)=>e.jsx(Z,{ref:r,className:m("text-lg font-semibold",t),...s}));oe.displayName=Z.displayName;const ne=n.forwardRef(({className:t,...s},r)=>e.jsx(ee,{ref:r,className:m("text-sm text-muted-foreground",t),...s}));ne.displayName=ee.displayName;const ie=n.forwardRef(({className:t,...s},r)=>e.jsx(Q,{ref:r,className:m(P(),t),...s}));ie.displayName=Q.displayName;const le=n.forwardRef(({className:t,...s},r)=>e.jsx(X,{ref:r,className:m(P({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));le.displayName=X.displayName;const lt=({error:t})=>{const{message:s,statu:r}=t,{open:a,toggleModal:o}=b();return e.jsx(nt,{open:a,onOpenChange:()=>o,children:e.jsxs(se,{children:[e.jsxs(re,{children:[e.jsxs(oe,{children:["Error: ",r]}),e.jsx(ne,{children:s})]}),e.jsxs(ae,{children:[e.jsx(le,{onClick:()=>o(),children:"Cancel"}),e.jsx(ie,{onClick:()=>o(),children:"Continue"})]})]})})};function ct({project:t,flash:s}){console.log(s);const{toggleModal:r}=b(),{initElement:a,elements:o,togleSave:i}=S(),{post:l,wasSuccessful:u,errors:g}=E({elements:[],project_id:t.id.toString()});n.useEffect(()=>{console.log("activado"),s.success?(Ce.success("Generando vídeos"),i()):s.error!=null&&r()},[u,s]),n.useEffect(()=>{const d=Ue.fromElementResponseToEntity(t.elements);a(d)},[]);const c=async()=>{const d=o.filter(f=>f.type===v.PRESENTER).filter(f=>!f.videoUrl);d.length<1||(pe.post(`/elements/generate/${t.id}`,{elements:JSON.stringify(d),project_id:t.id.toString()}),l(`/elements/generate/${t.id}`))};return e.jsx(Je,{children:e.jsxs("div",{className:"grid grid-rows-4 h-1/3",children:[e.jsxs("div",{className:"row-span-3 grid grid-cols-2",children:[e.jsxs(be,{defaultValue:"account",className:"bg-slate-300 px-4 py-1",color:"",children:[e.jsxs(we,{className:"",children:[e.jsx(D,{value:"account",className:"",children:"Presentador"}),e.jsx(D,{value:"password",children:"Video"})]}),e.jsx(A,{value:"account",children:e.jsx(Ae,{})}),e.jsx(A,{value:"password",children:e.jsx(Te,{})})]}),e.jsx(Ie,{})]}),e.jsxs("div",{className:"text-white row-span-1 bg-slate-700",children:[e.jsxs("div",{className:"flex justify-between mx-5",children:[e.jsx("h1",{className:"text-2xl tracking-tight hover:tracking-wid font-bold",children:"Guion"}),e.jsx(ye,{onClick:c,children:"Generar contenido"})]}),e.jsx(Pe,{})]}),s.error&&e.jsx(lt,{error:s.error})]})})}const Lt=qe(ct);export{Lt as default};
