import{r as x,W as F,q as y,j as e}from"./app-DRGzXkaU.js";import{B as g}from"./button-DodD20gp.js";import"./dialog-BKACdtwg.js";import{z as n,u as C,F as w,a as d,b as i,c as a,d as c,f as p,t as R}from"./zod-CPptsrG6.js";import{I as b}from"./input-BpmZrZAf.js";import{J as S}from"./index-DmsEpVvj.js";import{T as E}from"./textarea-Ck2kAl1L.js";import{R as I,a as P}from"./radio-group-B-JKypQc.js";import D from"./CreateOrEdit-BlDW-SaJ.js";import"./shadcn-C-5SdYIA.js";import"./index-CwjA-pLr.js";import"./react-icons.esm-VBrdgrbj.js";import"./index-CmmoRHAL.js";import"./index-VIEozLWX.js";import"./index-CRukyXja.js";import"./FormCreateOrEdit-BQERAtGa.js";import"./presenter-CLZs53NS.js";import"./modal-store-CzUVHPa0.js";import"./index-BwhF15f_.js";import"./CustomDialog2-BRyu_rVd.js";const T=x.createContext({}),B=n.object({name:n.string().min(3,{message:"El nombre del proyecto debe tener al menos 3 caracteres"}),description:n.string().optional(),cover_url:n.string().url(),presenter_id:n.string().min(1,{message:"Seleccione un presentador para su proyecto"})}),G={name:"",description:"",cover_url:void 0,presenter_id:""};function se(){const{data:l,post:N,processing:_,errors:s,progress:j,wasSuccessful:h}=F(G),{props:{presenters:u}}=y(),{handleTogle:f}=x.useContext(T),o=C({resolver:R(B)}),m=x.useRef(null);console.log(`Desde el form: ${u}`);const v=r=>{var t;console.log(r),m.current&&m.current.files&&(l.cover_url=(t=m.current)==null?void 0:t.files[0]),l.name=r.name,l.description=r.description,l.presenter_id=r.presenter_id,N("/projects")};return x.useEffect(()=>{h&&(S.success("Presentador registrado exitosamente"),f())},[h]),e.jsx(w,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(v),children:[e.jsx(d,{control:o.control,name:"name",render:({field:r})=>e.jsxs(i,{className:"mb-3",children:[e.jsx(a,{htmlFor:"name",children:"Nombre del Proyecto"}),e.jsx(c,{children:e.jsx(b,{id:"name",placeholder:"nombre",...r})}),e.jsx(p,{}),s.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.name})]})}),e.jsx(d,{control:o.control,name:"description",render:({field:r})=>e.jsxs(i,{className:"mb-3",children:[e.jsx(a,{htmlFor:"description",children:"Descripción"}),e.jsx(c,{children:e.jsx(E,{id:"description",placeholder:"descripción",...r})}),e.jsx(p,{}),s.description&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.description})]})}),e.jsx(d,{control:o.control,name:"cover_url",render:({field:r})=>e.jsxs(i,{className:"mb-3",children:[e.jsx(a,{children:"Portada"}),e.jsx(c,{children:e.jsx(b,{type:"file",placeholder:"foto",...r,ref:m})}),e.jsx(p,{}),s.cover_url&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.cover_url})]})}),e.jsx(d,{control:o.control,name:"presenter_id",render:({field:r})=>e.jsxs(i,{className:"mb-3",children:[e.jsxs(a,{className:"flex justify-between py-1",children:[e.jsx("p",{className:"text-lg  font-semibold",children:"Seleccionar Presentador"}),e.jsx(D,{})]}),e.jsx(c,{children:e.jsx(I,{onValueChange:r.onChange,defaultValue:r.value,className:"flex flex-row  space-y-1",children:e.jsx("div",{className:"w-full h-56 grid grid-cols-3 overflow-y-auto",children:u&&u.map(t=>e.jsxs(i,{className:" flex space-x-3",children:[e.jsx(c,{children:e.jsx(P,{value:t.id.toString()})}),e.jsx(a,{children:e.jsxs("div",{className:"",children:[e.jsx("p",{className:"text-md mb-1",children:t.full_name}),e.jsx("img",{className:"h-20 w-20",src:t.photo_url,alt:t.full_name})]})})]}))})})}),e.jsx(p,{}),s.presenter_id&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.presenter_id})]})}),j&&e.jsxs("progress",{value:j.percentage,max:"100",children:[j.percentage,"%"]}),e.jsxs("div",{className:"flex justify-between gap-5 mt-5",children:[e.jsx(g,{type:"button",variant:"destructive",onClick:()=>f(),children:"Cancelar"}),e.jsx(g,{type:"submit",disabled:_,children:"Registrar"})]})]})})}export{se as default};
